<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru">
  <head>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=utf-8" />
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <svg xmlns="http://www.w3.org/2000/svg" id="main"></svg>
    
    <!-- div для метаданных графа -->
    <div id="graph-info" class="graph-info">
      <div>Узлов: <span id="node-count">0</span></div>
      <div>Размер: <span id="graph-size-px">0 x 0 px</span></div>
      <div>При 96 dpi: <span id="graph-size-mm-96">0 x 0 mm</span></div>
      <div>При 300 dpi: <span id="graph-size-mm-300">0 x 0 mm</span></div>
      <!-- Управление экспортом -->
      <div id="export-controls">
          <button onclick="export2svg()" style="width: 100%;">Экспорт SVG</button>
      </div>
    </div>

    <!-- Управление симуляцией -->
    <div id="simulation-controls" style="position: fixed; top: 10px; left: 10px; background: white; padding: 10px; border: 1px solid #ccc; z-index: 1000; font-family: Arial, sans-serif;">
        <h3 style="margin: 0 0 10px 0;">Управление симуляцией</h3>
        
        <div class="control-group">
            <label>Сила зарядов:</label>
            <button onclick="changeChargeStrength(-SIMULATION_CONFIG.STEPS.CHARGE_STRENGTH)">-</button>
            <span id="charge-strength-value">-7000</span>
            <button onclick="changeChargeStrength(SIMULATION_CONFIG.STEPS.CHARGE_STRENGTH)">+</button>
        </div>
        
        <div class="control-group">
            <label>Радиус столкновений:</label>
            <button onclick="changeCollideRadius(-SIMULATION_CONFIG.STEPS.COLLIDE_RADIUS)">-</button>
            <span id="collide-radius-value">200</span>
            <button onclick="changeCollideRadius(SIMULATION_CONFIG.STEPS.COLLIDE_RADIUS)">+</button>
        </div>
        
        <div class="control-group">
            <label>Сила связей:</label>
            <button onclick="changeLinkStrength(-SIMULATION_CONFIG.STEPS.LINK_STRENGTH)">-</button>
            <span id="link-strength-value">0.1</span>
            <button onclick="changeLinkStrength(SIMULATION_CONFIG.STEPS.LINK_STRENGTH)">+</button>
        </div>
        
        <div class="control-group">
            <label>Сила по X:</label>
            <button onclick="changeXStrength(-SIMULATION_CONFIG.STEPS.X_STRENGTH)">-</button>
            <span id="x-strength-value">0.006</span>
            <button onclick="changeXStrength(SIMULATION_CONFIG.STEPS.X_STRENGTH)">+</button>
        </div>
        
        <div class="control-group">
            <label>Сила по Y:</label>
            <button onclick="changeYStrength(-SIMULATION_CONFIG.STEPS.Y_STRENGTH)">-</button>
            <span id="y-strength-value">0.012</span>
            <button onclick="changeYStrength(SIMULATION_CONFIG.STEPS.Y_STRENGTH)">+</button>
        </div>
        
        <div class="control-group">
            <label>Затухание скорости:</label>
            <button onclick="changeVelocityDecay(-SIMULATION_CONFIG.STEPS.VELOCITY_DECAY)">-</button>
            <span id="velocity-decay-value">0.01</span>
            <button onclick="changeVelocityDecay(SIMULATION_CONFIG.STEPS.VELOCITY_DECAY)">+</button>
        </div>
        
        <div class="control-group">
            <label>Затухание альфа:</label>
            <button onclick="changeAlphaDecay(-SIMULATION_CONFIG.STEPS.ALPHA_DECAY)">-</button>
            <span id="alpha-decay-value">0.01</span>
            <button onclick="changeAlphaDecay(SIMULATION_CONFIG.STEPS.ALPHA_DECAY)">+</button>
        </div>
        
        <div style="margin-top: 10px;">
            <button onclick="stopsim()" style="margin-right: 5px;">Стоп</button>
            <button onclick="startsim()" style="margin-right: 5px;">Старт</button>
        </div>
    </div>

    <!-- Управление темами -->
    <div id="theme-controls" style="position: fixed; bottom: 10px; left: 10px; background: white; padding: 10px; border: 1px solid #ccc; z-index: 1000; font-family: Arial, sans-serif;">  </div>

    <script src="d3js/d3.v7.min.js"></script>
    <!-- local_settings.js может и не быть (ничего страшного)-->
    <script defer src="local_settings.js"></script>
    <script defer src="funcs.js" charset="utf-8"></script>
    <script defer src="code.js" charset="utf-8"></script>
    <script defer src="simulation-controls.js" charset="utf-8"></script>
    <script defer src="themes.js" charset="utf-8"></script>
  </body>
</html>